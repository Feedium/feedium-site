{{ define "style" }}
  {{ $color := .Params.config.color }}
  {{ if eq $color "default" }}{{ $color = .Site.Params.color }}{{ end }}
  <link rel="stylesheet" href='{{.Site.BaseURL}}{{ printf "/assets/style/color/%s.css" $color }}' data-instant-track id="theme" async />
{{ end }}


{{ define "main" }}

  <div class="main-list">

    {{ $listHead := "» مختصر و مفید از همه جا" }}
    {{ $listTitle := .Title }}
    {{ $PageImage := .Site.Params.pageCover  }}
  
    {{ $SiteTitle := .Site.Title }}

    {{ range first 1 .Site.RegularPages }}
    {{ $imageResource := ($.Site.GetPage "section" "uploads").Resources.GetMatch (strings.TrimPrefix "/uploads/" ($PageImage) ) }}
    {{ $resizedCover := $imageResource.Resize "400x q20" }}
    {{ $tinyCover := $imageResource.Resize "10x" }}
    <div class="main-list-cover ">
      <img class="asyncImage"  crossorigin="anonymous" src="{{ $tinyCover.RelPermalink }}" data-src="{{ $resizedCover.RelPermalink }}" alt="{{ $SiteTitle }}"  />
    </div>
    {{ end }}

    <div class="main-list-head noselect">
        <div class="cleafix">
        </div>
        <div class="main-list-title">
            <h1 class="list-title">{{ $listTitle }}</h1>
        </div>
    </div>

    <div class="main-list-content feed">
			{{ $paginator := .Paginate (where .Site.Pages ".Params.config.feed" "==" true)  (index .Site.Params "paginate" | default 6) }}

      {{ range $paginator.Pages.ByDate.Reverse  }}
      <div class="post-list">
        <a href="{{ .Permalink }}" aria-label="{{ .Params.shamsiDate }}">
					<h3 class="title" data-date="» {{ .Params.shamsiDate }}"></h3>
				</a>					
        <article>{{ .Content }}</article> {{/*  | truncate 320  */}}
      </div>
      {{ end }}
    </div>
    {{ if gt $paginator.TotalPages 1 }}
    <div class="main-list-pagination">
        <div class="list-pagination">
            <div class="main-list-more">
              <a class="btn">بیشتر</a>
            </div>
        </div>
    </div>
    {{ end }}

      {{ $url := printf "%s" .Site.BaseURL  }}
      <div id="list" class="none">[
          {{ if $paginator }}
          {{ range $paginator.Pagers  }}
          {{ if ne .PageNumber 1 }}
          "{{ printf "%s%s" $url .URL }}",
          {{ end }}
          {{ end }}
          {{ end }}""]
      </div>
  </div>

  
{{ end }}    